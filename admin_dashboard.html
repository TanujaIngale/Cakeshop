{% extends "layout.html" %}
{% block content %}

<div class="d-flex justify-content-between align-items-center">
  <h3>Admin Dashboard</h3>
  <a class="btn btn-success" href="{{ url_for('add_cake') }}">Add Cake</a>
</div>
<hr>

<h5>Cakes</h5>
<div class="row">
  {% for cake in cakes %}
    <div class="col-md-3">
      <div class="card p-2 mb-2">
        <strong>{{ cake['name'] }}</strong>
        <div>₹ {{ '%.2f'|format(cake['price']) }}</div>
        {% if cake['image'] %}
          <img src="/static/images/{{ cake['image'] }}" width="100" class="my-2">
        {% endif %}
        <div class="mt-2">
          <!-- Edit & Delete Buttons -->
          <a href="{{ url_for('edit_cake', cake_id=cake['id']) }}" class="btn btn-warning btn-sm">Edit</a>
          <a href="{{ url_for('delete_cake', cake_id=cake['id']) }}" class="btn btn-danger btn-sm"
             onclick="return confirm('Are you sure you want to delete this cake?')">Delete</a>
        </div>
      </div>
    </div>
  {% endfor %}
</div>

<hr>
<h5>Orders</h5>
<table class="table table-bordered">
  <thead>
    <tr>
      <th>Order ID</th>
      <th>Items</th>
      <th>Total</th>
      <th>Actions</th>
    </tr>
  </thead>
  <tbody>
    {% for order in orders %}
      <tr>
        <td>{{ order['id'] }}</td>
        <td>{{ order['items'] }}</td>
        <td>₹ {{ '%.2f'|format(order['total']) }}</td>
        <td>
          <!-- Print Bill PDF Button -->
          <a href="{{ url_for('download_bill', order_id=order['id']) }}" target="_blank" class="btn btn-primary btn-sm">
            Print Bill
          </a>
        </td>
      </tr>
    {% endfor %}
  </tbody>
</table>

{% endblock %}
